<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <title>Каталог товара TechnoDuck</title>
</head>
<body>
    <div id="wrapper">
        <div id="main">
            <img class="main-img" src="tecnoduck.png">
        </div>
        <form id="form">
            <div class="form-text">Оформление</div>
            <div>
                </label><input type="text" id="user_name" placeholder="Имя">
            </div>
            <div>
                </label><input type="text" id="user_phone" placeholder="Номер телефона">
            </div>
            <div id="error"></div>
            <button class="send">Заказать</button>
        </form>
        <div id="card_1">
            <img class="card-img" src="iphone15promax.png">
            <div class="card-title">iPhone 15 Pro Max</div>
            <div class="card-price">118.000 ₽</div>
            <div class="card-spec">256 ГБ</div>
            <div class="card-description">
                Дисплей Super Retina XDR (120Гц),
                процессор A17 Pro, титановый
                корпус, поддержка 5G.
            </div>
            <button class="order">Заказать</button>
        </div>
        <div id="card_2">
            <img class="card-img" src="iphone15promax.png">
            <div class="card-title">iPhone 15 Pro Max</div>
            <div class="card-price">118.000 ₽</div>
            <div class="card-spec">256 ГБ</div>
            <div class="card-description">
                Дисплей Super Retina XDR (120Гц),
                процессор A17 Pro, титановый
                корпус, поддержка 5G.
            </div>
            <button class="order">Заказать</button>
        </div>
        <div id="card_3">
            <img class="card-img" src="iphone15promax.png">
            <div class="card-title">iPhone 15 Pro Max</div>
            <div class="card-price">118.000 ₽</div>
            <div class="card-spec">256 ГБ</div>
            <div class="card-description">
                Дисплей Super Retina XDR (120Гц),
                процессор A17 Pro, титановый
                корпус, поддержка 5G.
            </div>
            <button class="order">Заказать</button>
        </div>
        <div id="card_4">
            <img class="card-img" src="iphone15promax.png">
            <div class="card-title">iPhone 15 Pro Max</div>
            <div class="card-price">118.000 ₽</div>
            <div class="card-spec">256 ГБ</div>
            <div class="card-description">
                Дисплей Super Retina XDR (120Гц),
                процессор A17 Pro, титановый
                корпус, поддержка 5G.
            </div>
            <button class="order">Заказать</button>
        </div>
    </div>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>

    let tg = window.Telegram.WebApp;
    let orders = document.getElementsByClassName("order");
    let send = document.getElementById("send");


    for (let i = 0; i < orders.length; i++) {
        orders[i].addEventListener("click", () => {
            document.getElementById("card_1").style.display = "none";
            document.getElementById("card_2").style.display = "none";
            document.getElementById("card_3").style.display = "none";
            document.getElementById("card_4").style.display = "none";
            document.getElementById("main").style.display = "none";
            document.getElementById("form").style.display = "block";
            document.getElementById("user_name").value = tg.initDataUnsafe.user.first_name + " " + tg.initDataUnsafe.user.last_Name;
        });
    }

    send.addEventListener("click", () => {
        document.getElementById("error").innerText = " ";
        let id = tg.initDataUnsafe.user.id;
        let name = document.getElementById("user_name").value;
        let number = document.getElementById("user_phone").value;
        if (name.length < 3) {
            document.getElementById("error").innerText = "Вероятно, вы ошиблись в имени.";
            return;
        }
        if (number.length < 11) {
            document.getElementById("error").innerText = "Вероятно, вы ошиблись в номере телефона.";
            return;
        }
        let data = {
            name: name,
            number: number,
            id: id
        }
        tg.sendData(JSON.stringify(data));
        tg.close()
    })
</script>
</body>
</html>
